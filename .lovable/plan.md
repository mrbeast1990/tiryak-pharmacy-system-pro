

# تعديل نظام الخدمات المصرفية + تغيير "شبكة" إلى "خدمات"

## التعديل الأول: إعادة تصميم إدخال الخدمات المصرفية (نظام الشرائح/Chips)

### المشكلة
النظام الحالي يعرض 5 حقول ثابتة لكل خدمة مصرفية، مما يعني أن المستخدم يسجل إجمالي واحد لكل خدمة. لكن الواقع أن المستخدم قد يبيع 4 معاملات موبي كاش مختلفة ويريد تسجيل كل معاملة على حدة.

### الحل
تحويل `BankingServiceInput` إلى نظام شرائح (Chips):
- القائمة المنسدلة (Select): لاختيار نوع الخدمة (موبي كاش، يسر باي، إلخ)
- حقل المبلغ: لإدخال قيمة المعاملة الواحدة
- زر إضافة (+): لإضافة المعاملة كشريحة
- الشرائح: تظهر أسفل حقل الإدخال بصيغة "اسم الخدمة: المبلغ" مع زر حذف (x)
- الإجمالي: يُحسب تلقائيا من مجموع جميع الشرائح
- يمكن إضافة أكثر من معاملة لنفس الخدمة

### التغييرات التقنية

**الملف: `src/components/revenue/BankingServiceInput.tsx`** (إعادة كتابة)
- تغيير الـ interface من `BankingServiceValues` (كائن بقيم ثابتة) إلى `BankingServiceEntry[]` (مصفوفة معاملات)
- كل معاملة تحتوي: `{ id: string, service: string, amount: number }`
- إضافة state داخلي لاختيار الخدمة وكتابة المبلغ
- عرض الشرائح المضافة مع إمكانية الحذف
- حساب الإجمالي من المصفوفة

**الملف: `src/components/revenue/RevenueForm.tsx`** (تعديل)
- تحديث الـ props لتتوافق مع النوع الجديد `BankingServiceEntry[]` بدلا من `BankingServiceValues`
- تحديث حساب الإجمالي
- تغيير "شبكة" إلى "خدمات" في عرض الإجمالي (سطر 153)

**الملف: `src/hooks/revenue/useRevenueForm.ts`** (تعديل)
- تعديل handleSubmit ليقرأ من المصفوفة الجديدة بدلا من الكائن
- كل عنصر في المصفوفة يُحفظ كسجل مستقل في قاعدة البيانات

**الملف: `src/hooks/revenue/useRevenueState.ts`** (تعديل)
- تحديث نوع bankingValues من كائن إلى مصفوفة
- تحديث resetBankingValues

---

## التعديل الثاني: تغيير "شبكة" إلى "خدمات"

### الملفات المتأثرة:
| الملف | الموقع |
|-------|--------|
| `RevenueForm.tsx` | سطر 153: `شبكة:` -> `خدمات:` |
| `AdminRevenueDisplay.tsx` | سطر 97: `شبكة:` -> `خدمات:` |
| `AdminRevenueDisplay.tsx` | سطر 134: `شبكة:` -> `خدمات:` |

---

## ملخص الملفات المتأثرة

| الملف | نوع التعديل |
|-------|------------|
| `src/components/revenue/BankingServiceInput.tsx` | إعادة كتابة كاملة - نظام شرائح |
| `src/components/revenue/RevenueForm.tsx` | تحديث props + تغيير "شبكة" |
| `src/hooks/revenue/useRevenueForm.ts` | تعديل handleSubmit للمصفوفة الجديدة |
| `src/hooks/revenue/useRevenueState.ts` | تحديث نوع البيانات |
| `src/components/revenue/AdminRevenueDisplay.tsx` | تغيير "شبكة" إلى "خدمات" |

