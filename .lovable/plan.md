
# خطة التعديلات الثلاثة

## 1. إضافة زر تعديل بيانات الشركة في صفحة تفاصيل الشركة

### المشكلة
عند اختيار شركة معينة تظهر بياناتها (الاسم، المندوب، الهاتف، رقم الحساب) لكن لا يوجد زر تعديل مباشر.

### الحل
- إضافة زر تعديل (أيقونة قلم) بجانب اسم الشركة في `CompanyDetailsView.tsx`
- عند الضغط عليه يفتح `EditCompanyDialog` الموجود بالفعل
- عند حفظ التعديلات يتم تحديث بيانات الشركة المعروضة مباشرة

### الملف: `src/components/payments/CompanyDetailsView.tsx`
- استيراد `EditCompanyDialog` و أيقونة `Pencil`
- إضافة state لفتح/إغلاق dialog التعديل
- إضافة زر `Pencil` بجانب عنوان الشركة في الـ header
- إضافة `EditCompanyDialog` في نهاية الـ component
- تحديث بيانات الشركة بعد التعديل عبر `fetchCompanies`

### الملف: `src/components/payments/PaymentsManager.tsx`
- تحديث `selectedCompany` من الـ store بعد التعديل لضمان عرض البيانات المحدثة

---

## 2. جعل إجمالي السدادات يعرض الشهر الحالي افتراضيا

### المشكلة
`PaymentsSummary` يعرض إجمالي كل السدادات بدون تصفية. المطلوب أن يكون الافتراضي هو الشهر الحالي فقط.

### الحل
- تغيير القيمة الافتراضية لـ `dateFilter` في `paymentsStore.ts` من `'all'` إلى `'month'`
- هذا سيجعل `getFilteredPayments()` و `getTotalAmount()` و `getUndeductedTotal()` تحسب للشهر الحالي فقط تلقائيا
- عند بداية شهر جديد، `selectedMonth` يتم حسابه من `new Date()` فسيتغير تلقائيا

### الملف: `src/store/paymentsStore.ts`
- تغيير سطر واحد: `dateFilter: 'all'` -> `dateFilter: 'month'`

---

## 3. إعادة تصميم صفحة التقارير بشكل احترافي

### المشكلة
صفحة التقارير الحالية بسيطة جدا وتحتاج تصميم أكثر احترافية.

### الحل - إعادة تصميم كامل لـ `ReportsPage.tsx`:
- **Header جديد**: بنفس تصميم باقي الصفحات (backdrop-blur، gradient icon)
- **بطاقات ملخص علوية**: 4 بطاقات ملونة بتدرجات (إجمالي الموظفين، إجمالي النواقص، متوسط الأداء، أفضل موظف)
- **جدول أداء محسّن**: تصميم أنيق مع أيقونات وألوان تقييم واضحة، صفوف متناوبة الألوان
- **قسم تصدير PDF محسّن**: تواريخ في سطر واحد مع زر التصدير، تصميم أنظف
- **الرسوم البيانية**: نفس البيانات لكن بألوان متناسقة مع هوية التطبيق (أخضر/تيل)
- **تصميم متجاوب**: يعمل بشكل ممتاز على الموبايل والديسكتوب
- **إزالة الـ background logo**: لتنظيف المظهر

### الملف: `src/components/ReportsPage.tsx`
- إعادة كتابة كاملة للواجهة مع الحفاظ على نفس المنطق والبيانات

---

## ملخص الملفات المتأثرة

| الملف | التعديل |
|-------|---------|
| `src/components/payments/CompanyDetailsView.tsx` | إضافة زر تعديل + EditCompanyDialog |
| `src/components/payments/PaymentsManager.tsx` | تحديث selectedCompany بعد التعديل |
| `src/store/paymentsStore.ts` | تغيير dateFilter الافتراضي إلى 'month' |
| `src/components/ReportsPage.tsx` | إعادة تصميم كامل احترافي |
