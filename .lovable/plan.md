
# اضافة رقم تسلسلي للطلبية + اصلاح مشاركة الواتساب

## التعديلات المطلوبة

### 1. رقم تسلسلي للطلبية (TS101, TS102, ...)
- اضافة `nextOrderNumber` في `orderHistoryStore.ts` محفوظ في localStorage يبدأ من 101
- كل طلبية جديدة تأخذ رقم `TS{nextOrderNumber}` ويزيد العداد تلقائيا
- حفظ `orderNumber` في واجهة `SavedOrder`
- عرض "طلب شراء رقم TS101" في PDF تحت سطر التاريخ والشركة الموردة

### 2. عرض رقم الطلبية في PDF
**الملف**: `src/hooks/useOrderPDF.ts`
- اضافة معامل `orderNumber` في `UseOrderPDFOptions`
- بعد سطر التاريخ (سطر 131)، اضافة سطر: `طلب شراء رقم TS{number}`
- بخط حجم 12 ولون أسود عريض

### 3. فصل زر التصدير عن المشاركة
**الملف**: `src/components/order-builder/OrderSummary.tsx`
- تغيير الزر الحالي "تصدير ومشاركة" ليقوم بالتصدير فقط (حفظ PDF)
- اضافة زر منفصل لمشاركة الواتساب يفتح واتساب بدون مرفق (رسالة نصية فقط)
- او الابقاء على زر واحد لكن يصدر PDF اولا ثم يفتح واتساب

### 4. اصلاح مشاركة الواتساب
**الملف**: `src/hooks/useOrderPDF.ts` - دالة `shareViaWhatsApp`
- تعديل الرسالة لتشمل رقم الطلبية واسم المورد
- ارسال رسالة نصية فقط (بدون مرفق) وهذا هو السلوك الحالي اصلا عبر `wa.me`
- المشكلة الحالية: الزر يصدر PDF ثم يفتح واتساب معا - سنبقي نفس السلوك لكن نوضح ان واتساب يرسل رسالة فقط

---

## التفاصيل التقنية

### تعديل `orderHistoryStore.ts`:
- اضافة `nextOrderNumber: number` (يبدأ من 101) في الـ state
- تعديل `saveOrder` ليعطي رقم `TS{nextOrderNumber}` ويزيد العداد
- اضافة حقل `orderNumber: string` في `SavedOrder`

### تعديل `useOrderPDF.ts`:
- اضافة `orderNumber` في الـ interface
- اضافة سطر في PDF بعد التاريخ: `طلب شراء رقم {orderNumber}`

### تعديل `OrderBuilder.tsx`:
- عند `handleExportPDF`: توليد رقم الطلبية من الـ store وتمريره لـ `generatePDF`
- عند طلبية محملة من السجل: استخدام رقمها الموجود

### تعديل `OrderSummary.tsx`:
- فصل الازرار: زر "تصدير PDF" وزر "مشاركة واتساب" منفصلين
- او الابقاء على زر واحد مع توضيح انه يحفظ PDF ثم يفتح واتساب برسالة نصية
